<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
  'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='modelo.dao.mappers.UsuarioMapper'>


	<select id='leerDatos' resultType='modelo.Pojo.UsuarioPojo'>
		SELECT
		*
		FROM
		usuaris
		WHERE
		usuario = #{usuario} AND password= #{password}

	</select>


	<select id='leerDatosEmpleado'
		resultType='modelo.Pojo.UsuarioPojo'>
		SELECT
		*
		FROM
		empleados
		WHERE
		usuario = #{usuario} AND password=
		#{password}

	</select>


	<select id='getFoto' resultType='modelo.Pojo.UsuarioPojo'>
		SELECT
		foto
		FROM
		usuaris
		where
		usuario #{usuario}

	</select>

	<insert id='AñadirUsuarios'>
		INSERT INTO usuaris
		(emailUsuario,nombre,usuario,password,foto,activado)
		VALUES(#{emailUsuario},#{nombre},
		#{usuario}, #{password}, #{foto},
		#{activado})
	</insert>
	
	<insert id='AñadirEmpleado'>
		INSERT INTO empleados
		(emailUsuario,nombre,usuario,password,foto)
		VALUES(#{emailUsuario},#{nombre},
		#{usuario}, #{password}, #{foto})
	</insert>

	<update id='ActivarUsuario'>
		UPDATE usuaris
		SET
		activado ='s'
		WHERE emailUsuario =
		(select
		emailUsuario from claveregistro where codigo = #{codigo})
	</update>



	<update id="pantallaUsuario">
		UPDATE usuaris
		SET
		pantalla = #{pantalla}
		WHERE usuario
		= #{usuario}

	</update>

	<delete id='eliminarUsuario'>
		DELETE FROM usuaris WHERE emailUsuario =
		#{emailUsuario}
	</delete>

	<delete id='eliminarEmpleado'>
		DELETE FROM empleados WHERE emailUsuario =
		#{emailUsuario}
	</delete>

	<delete id="eliminarClave">
		DELETE FROM claveregistro WHERE emailUsuario
		=#{emailUsuario}
	</delete>


	<update id='updateContraseña' parameterType='UsuarioPojo'>
		UPDATE
		usuaris
		SET

		password = #{password}
		WHERE usuaris.emailUsuario = #{emailUsuario}
	</update>

</mapper>